<div ng-controller="distributionPickerCtrl" class="distribution-picker">
    <div class="control-group umb-control-group" ng-repeat="item in items | orderBy: 'name'">
        <div class="umb-el-wrap">

            <div class="control-label" ng-class="{'inactive' : model.value.distributions.indexOf(item.id) == -1}">
                <div class="pretty p-svg p-curve">
                    <input type="checkbox"
                           ng-click="toggleDistributionSelection(item.id)"
                           ng-checked="model.value.distributions.indexOf(item.id) > -1"
                           class="active"
                           />
                    <div class="state p-success">
                        <svg class="svg svg-icon" viewBox="0 0 20 20">
                            <path d="M7.629,14.566c0.125,0.125,0.291,0.188,0.456,0.188c0.164,0,0.329-0.062,0.456-0.188l8.219-8.221c0.252-0.252,0.252-0.659,0-0.911c-0.252-0.252-0.659-0.252-0.911,0l-7.764,7.763L4.152,9.267c-0.252-0.251-0.66-0.251-0.911,0c-0.252,0.252-0.252,0.66,0,0.911L7.629,14.566z" style="stroke: white;fill:white;"></path>
                        </svg>
                        <label>
                            {{ item.name }}
                        </label>
                    </div>
                </div>
            </div>
            <div class="controls">
                <div ng-repeat="child in item.children | orderBy: 'name'" ng-class="{'inactive' : model.value.suppliers.indexOf(child.id) == -1 || model.value.distributions.indexOf(item.id) == -1}">
                    <div class="pretty p-svg p-curve">
                        <input type="checkbox"
                               ng-click="toggleSupplierSelection(child.id)"
                               ng-checked="model.value.suppliers.indexOf(child.id) > -1"
                               ng-class="{'active' : model.value.distributions.indexOf(item.id) > -1}"
                               />
                        <div class="state p-success">
                            <!-- svg path -->
                            <svg class="svg svg-icon" viewBox="0 0 20 20">
                                <path d="M7.629,14.566c0.125,0.125,0.291,0.188,0.456,0.188c0.164,0,0.329-0.062,0.456-0.188l8.219-8.221c0.252-0.252,0.252-0.659,0-0.911c-0.252-0.252-0.659-0.252-0.911,0l-7.764,7.763L4.152,9.267c-0.252-0.251-0.66-0.251-0.911,0c-0.252,0.252-0.252,0.66,0,0.911L7.629,14.566z" style="stroke: white;fill:white;"></path>
                            </svg>
                            <label class="child">{{ child.name }}</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>